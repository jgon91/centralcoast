<!DOCTYPE html>
<html lang="en">
	<head>
		{% load staticfiles %}
		{% load i18n %}
		<link rel="stylesheet" type="text/css" href="{% static 'css/equipStyle.css' %}">
		<link rel="stylesheet" type="text/css" href="{% static 'css/styleManager.css' %}">
		<script src="{% static 'js/jquery-1.11.2.min.js' %}"></script>
		<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
		<script src="{% static 'js/script.js' %}"></script>
		<script>
			$(document).ready(function() {
				$("#foot").load("{% url 'footer' %}");
				$("#head").load("{% url 'headerManager' %}");

				getAllEmployees("{{ csrf_token }}", "{% url 'getAllEmployees' %}");
			});

			function getAllEmployees(token, url) {
				
					$.ajax({
						method: "POST",
						url: url,
						data: {"csrfmiddlewaretoken": token },
						datatype: "json",
						success: function(data, status, xhr){							
							console.log(data);
							for(var i = 0; i < data.employees.length; i++){
								if(i%2 == 0) {
									$(".tableListForm").append("<tr class='rowCream'><td>" + data.employees[i].first_name + " " + data.employees[i].last_name + "</td><td><a href='{% url 'employeeManagerUpdateForm' %}?user_id="+ data.employees[i].user_id +"' ><input type='button' class='btnManageForm' value='{% trans 'EDIT' %}'/></a></td><td><a href='#' ><input type='button' class='btnManageForm' value='{% trans 'SEE' %}'/></a></tr>");
								} else {
									$(".tableListForm").append("<tr class='rowGray'><td>" + data.employees[i].first_name + " " + data.employees[i].last_name + "</td><td><a href='{% url 'employeeManagerUpdateForm' %}?user_id="+ data.employees[i].user_id +"' ><input type='button' class='btnManageForm' value='{% trans 'EDIT' %}'/></a></td><td><a href='#' ><input type='button' class='btnManageForm' value='{% trans 'SEE' %}'/></a></tr>");
								}
							}

							//$(".editEmployee").click( function(){ 
							//	editEmployee(token, this.id);
							//});
							
						}
					});			
			}
			/*
			function editEmployee(token, id) {
				
					$.ajax({
						method: "POST",
						url: "{% url 'employeeManagerUpdateForm' %}",
						data: {"csrfmiddlewaretoken": token, "user_id": id, "controler": true },
						datatype: "json",
						success: function(data, status, xhr){							
							console.log(data);
							//document.write(data);
							$("#content").html(data);
						}
					});			
			}
			*/
		</script>
		
	</head>
	<body>
		<header id="head"></header>
			<div id="wrapper">
				<div id="content" style="text-align: center;">
					<div id="contentManageForm">
						<table class="tableListForm">					
	
						</table>
					</div>
				</div>
			</div>
		<footer id="foot"></footer>
	</body>
</html>